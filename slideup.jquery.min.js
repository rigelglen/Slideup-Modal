(function(a){a("a[data-reveal-id]").live("click",function(c){c.preventDefault();var b=a(this).attr("data-reveal-id");a("#"+b).reveal(a(this).data())});a.fn.reveal=function(b){var c={animationspeed:500,closeonbackgroundclick:true,dismissmodalclass:"close-slideup-modal"};var b=a.extend({},c,b);return this.each(function(){var l=a(this),i=parseInt(l.css("height")),f=parseInt(l.css("top")),h=l.height()+f,g=false,k=a(".slideup-modal-bg");var e=a(".close-slideup-modal");if(k.length==0){k=a('<div class="slideup-modal-bg" />').insertAfter(l)}a('<a class="close-slideup-modal close-slideup-modal-button">Close</a>').appendTo(".slideup-modal");l.bind("reveal:open",function(){k.unbind("click.modalEvent");a("."+b.dismissmodalclass).unbind("click.modalEvent");if(!g){m();l.css({"top":i*-1.5,"visibility":"visible","display":"block"});k.fadeIn(b.animationspeed/2);l.delay(b.animationspeed/2).animate({"top":"0px",},b.animationspeed,j())}l.unbind("reveal:open")});l.bind("reveal:close",function(){if(!g){m();k.delay(b.animationspeed).fadeOut(b.animationspeed);l.animate({"top":"-1000px",},b.animationspeed*1.5,function(){l.css({"top":"-1000px","visibility":"hidden","display":"none"});j()})}l.unbind("reveal:close")});l.trigger("reveal:open");var d=a("."+b.dismissmodalclass).bind("click.modalEvent",function(){l.trigger("reveal:close")});if(b.closeonbackgroundclick){k.css({"cursor":"pointer"});k.bind("click.modalEvent",function(){l.trigger("reveal:close")})}a("body").keyup(function(n){if(n.which===27){l.trigger("reveal:close")}});function j(){g=false}function m(){g=true}})}})(jQuery);